easyblock = 'Binary'

name = 'X.Org'
version = '2016-08-23'

homepage = 'https://www.x.org/wiki'
description = """The X.Org project provides an open source implementation of the X Window System.
The development work is being done in conjunction with the freedesktop.org
community."""

toolchain = {'name': 'GCCcore', 'version': '4.9.3'}

sources = ['xorg.modules', 'jhbuildrc']

source_urls = ['https://cgit.freedesktop.org/xorg/util/modular/plain/']

patches = ['xorg_moduleset-%(version)s.patch', 'xorg_jhbuild-%(version)s.patch']

builddependencies = [
    ('binutils', '2.25'),
    ('jhbuild', '3.15.92'),
    ('Autotools', '20150215'), 
    ('pkg-config', '0.29.1'),
    ('git', '2.9.3'),
    ('flex', '2.6.0'),
    ('Bison', '3.0.4'),
    ('gperf', '3.0.4'),
    ('intltool', '0.51.0', '-Perl-5.24.0'),
    ('gettext', '0.19.8'),
    ('Perl', '5.24.0'),
    ('XML-Parser', '2.44_01', '-Perl-5.24.0'),
]

dependencies = [
    ('eudev', '3.2'),
    ('LLVM', '3.8.1'),
    ('freetype', '2.6.5'),
    ('zlib', '1.2.8'),
]

preinstallopts = 'PYTHONPATH=/homeb/zam/ocaisa/temp/Python/lib EBBUILDDIR=%(builddir)s EBINSTALLDIR=%(installdir)s XORG_VERSION_DATE=%(version)s '
preinstallopts += 'XORG_SKIP_SET="libAppleWM mtdev xf86-input-joystick xf86-video-ati xf86-video-geode xf86-video-modesetting xf86-video-sisusb xf86-video-v4l xf86-video-vmware xf86-video-wsfb xf86-input-evdev " '
install_cmd = 'jhbuild -f jhbuildrc'


sanity_check_paths = {
    'files': ['lib/libX11.a', 'lib/libGL.so'],
    'dirs': ['bin', 'lib'],
}

moduleclass = 'vis'
